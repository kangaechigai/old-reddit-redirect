[
  {
    "id": 1,
    "priority": 1,
    "action": {
      "type": "redirect",
      "redirect": { "transform": { "host": "old.reddit.com" } }
    },
    "condition": {
      "requestDomains": [ "reddit.com" ],
      "excludedRequestDomains": [ "old.reddit.com", "new.reddit.com" ],
      "resourceTypes": [
        "main_frame",
        "sub_frame",
        "stylesheet",
        "script",
        "image",
        "object",
        "xmlhttprequest",
        "other"
      ]
    }
  },
  {
    "id": 2,
    "priority": 2,
    "action": {
      "type": "redirect",
      "redirect": { "regexSubstitution": "https://old.reddit.com/\\1" }
    },
    "condition": {
      "excludedRequestDomains": [ "old.reddit.com", "new.reddit.com" ],
      "regexFilter": "^https?://[^/]*\\breddit.com/gallery/(.*)",
      "resourceTypes": [ "main_frame", "sub_frame" ]
    }
  },
  {
    "id": 3,
    "priority": 3,
    "action": { "type": "allow" },
    "condition": {
      "regexFilter": "^https?://[^/]*\\breddit.com/(poll|rpan|settings|topics|community-points|user/[^/]*/draft/)",
      "resourceTypes": [ "main_frame", "sub_frame" ]
    }
  }
]
